++Консоль Оператора1

Консоль Оператора

- реализовать как отдельную длл, соединенную каналами связи: 
  - туда - вывод консоли
  - оттуда - ввод консоли
- потоки: 
  - 1 поток на GUI консоли, он же обслуживает ввод от пользователя. Берет текст и передает его в пипу.
  - 1 поток на вывод на консоль + очередь сообщений вывода. Он же слушает входной канал сообщений.
    - вывод на консоль - мгновенный, так зачем очередь?
      - чтобы не выводить сообщения во время ввода и диалогов.
        - но диалоги - длинные по времени, какая там очередь сообщений должна быть?
        - а как бы выводить сообщения мимо активного диалога, если они не требуют реакции пользователя?
          - в отдельное окно? 

- Вывод на консоль - независимо от ввода.
  - как это? Пока пользователь набирает текст ответа. на консоль выводятся другие сообщения?
    Внутри диалога это нельзя допустить.
  - проблема в том, что консоль одна на все задачи Оператора. А Оператор может выполнять несколько Задач одновременно?

- вывод на консоль и ввод с консоли - должны записываться в файл лога консоли. Чтобы можно было прокрутить консоль до начала сеанса, а в окне консоли показывать только кусочек в 64кб текста.
-- с цветами текста? это вроде RTF-формата получается... Или HTML/XML?
-- надо это опробовать на небольшом прототипе. Логи за сеанс хранить? Нужен механизм хранения такого лога консоли, подобный общему логу, как в Тапп. Это целая подсистема получается.

- Проблема: если надо открыть окно-диалог, реализованный в другой сборке (например, редактировать карточку предмета  Инвентарь), то в этой схеме этого нельзя сделать. Так как консоль расположена в другом процессе. Через нее только текст можно прокачивать.

- кроме консоли, на Оператор надо так же прицеплять голосовой движок (читалку и распознавалку).
  То есть, 2 таких канала-консоли одновременно надо.

- связь через пипы или TCP. TCP хорош по сети, а пипы - быстрее. 

- потоки:
  - 1 поток висит на евенте и ждет входное сообщение для вывода на консоль. И пишет их в очередь сообщений вывода.
  - 2 поток крутится на гуе, ждет или кнопку Отправить, или очередь выходных сообщений не пустую. По таймеру?
      Или событие окна от 1-го потока, и по нему очищает список сообщений. Хотя, таймер лучше.

- проблема с говорилкой
  - оказалось, если приделать говорилку к консоли Оператора, то консоль должна ждать, пока говорилка не закончит, и только после этого возвращать управление. Это важно!
  - к сообщению должен быть прикреплен флаг, Говорить или нет. Так как не все сообщения на консоль надо озвучивать.
    - этого недостаточно! Вывод речевой не такой, как вывод текстовый. 
      Списки нельзя выводить речью так, как они выводятся текстом.
      Значит, надо полностью иначе формировать тексты для голосового вывода.
      Следовательно, и выводить их надо через другой канал.
  - значит, говорилку нельзя прицепить параллельно с консолью на тот же канал связи.
    Ее надо цеплять либо к консоли, либо к Оператору через отдельный канал.
    - поскольку вывод на говорилку не такой же как вывод на консоль, то надо говорилку реализовать как отдельный модуль и для нее собственные вызовы и подготовленные тексты диалогов.
      То есть. фактически, нужно разрабатывать голосовые диалоги отдельно от текстовых - они не одинаковые.
      - значит, либо текстовые диалоги, либо голосовые - в Операторе все диалоги должны будут разделяться на текстовые или голосовые варианты.
- нужны команды управления голосовым выводом Оператору: Говорить, Молчать, Громче голос, Тише голос.

- тексты команд от консоли в Движок Оператора передавать через класс Лексикон, который должен располагаться во внешней сборке, в расчете на будущее развитие.
  - внешняя сборка - длл - как-то многовато сборок в проекте получается. 
    И в ней должен быть только этот класс, в расчете, что я потом доопределю все остальное для разбора текста команд, и помещу в эту сборку. А сейчас там просто функцию-проходную заглушку реализовать. И функции инициализации и освобождения этого модуля?






